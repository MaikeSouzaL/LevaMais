# ğŸ—ï¸ Arquitetura do Sistema Leva Mais

## VisÃ£o Geral da Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LEVA MAIS PLATFORM                                  â”‚
â”‚                    Sistema de Transporte e LogÃ­stica                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                    CAMADA DE APRESENTAÃ‡ÃƒO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   MOBILE APP        â”‚              â”‚   WEB ADMIN PANEL               â”‚  â”‚
â”‚  â”‚   React Native      â”‚              â”‚   Next.js 16                    â”‚  â”‚
â”‚  â”‚   + Expo            â”‚              â”‚                                 â”‚  â”‚
â”‚  â”‚                     â”‚              â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚   â”‚  Dashboard               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Cliente      â”‚   â”‚              â”‚   â”‚  â€¢ EstatÃ­sticas          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Home       â”‚   â”‚              â”‚   â”‚  â€¢ Resumo geral          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Mapa       â”‚   â”‚              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Favoritos  â”‚   â”‚              â”‚                                 â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Perfil     â”‚   â”‚              â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚   â”‚  ConfiguraÃ§Ãµes           â”‚  â”‚  â”‚
â”‚  â”‚                     â”‚              â”‚   â”‚  â€¢ Tipos de ServiÃ§o âœ…   â”‚  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚   â”‚  â€¢ UsuÃ¡rios (futuro)     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Motorista    â”‚   â”‚              â”‚   â”‚  â€¢ RelatÃ³rios (futuro)   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Dashboard  â”‚   â”‚              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Corridas   â”‚   â”‚              â”‚                                 â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ HistÃ³rico  â”‚   â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚           â”‚                                          â”‚                      â”‚
â”‚           â”‚                                          â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                          â”‚
            â”‚         REST API (HTTP/HTTPS)            â”‚
            â”‚                                          â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CAMADA DE NEGÃ“CIO                                 â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        BACKEND API (Node.js)                          â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                         ROUTES                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   /auth     â”‚  â”‚  /purposes   â”‚  â”‚    /favorites      â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ register â”‚  â”‚  â€¢ list      â”‚  â”‚    â€¢ list          â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ login    â”‚  â”‚  â€¢ create    â”‚  â”‚    â€¢ create        â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ google   â”‚  â”‚  â€¢ update    â”‚  â”‚    â€¢ update        â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ forgot   â”‚  â”‚  â€¢ delete    â”‚  â”‚    â€¢ delete        â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                  â”‚                                     â”‚  â”‚
â”‚  â”‚                                  â–¼                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                      MIDDLEWARES                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Auth Middleware (JWT Verification)                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Error Handler                                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ CORS                                                         â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                  â”‚                                     â”‚  â”‚
â”‚  â”‚                                  â–¼                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                      CONTROLLERS                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   Auth       â”‚  â”‚   Purpose     â”‚  â”‚    Favorite      â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  Controller  â”‚  â”‚   Controller  â”‚  â”‚    Controller    â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                  â”‚                                     â”‚  â”‚
â”‚  â”‚                                  â–¼                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                        SERVICES                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  Email Service â”‚         â”‚  Notification Service    â”‚      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Nodemailer  â”‚         â”‚  â€¢ Expo Push Tokens      â”‚      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Templates   â”‚         â”‚  â€¢ Send Notifications    â”‚      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                  â”‚                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          CAMADA DE DADOS                                    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     MONGODB DATABASE                                  â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚                        COLLECTIONS                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   users    â”‚  â”‚  purposes  â”‚  â”‚  favorites  â”‚  â”‚ password â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚            â”‚  â”‚            â”‚  â”‚             â”‚  â”‚  resets  â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ _id      â”‚  â”‚ â€¢ _id      â”‚  â”‚ â€¢ _id       â”‚  â”‚          â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ name     â”‚  â”‚ â€¢ vehicle  â”‚  â”‚ â€¢ userId    â”‚  â”‚ â€¢ userId â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ email    â”‚  â”‚   Type     â”‚  â”‚ â€¢ label     â”‚  â”‚ â€¢ code   â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ password â”‚  â”‚ â€¢ title    â”‚  â”‚ â€¢ address   â”‚  â”‚ â€¢ expire â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ phone    â”‚  â”‚ â€¢ subtitle â”‚  â”‚ â€¢ lat/lng   â”‚  â”‚          â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ userType â”‚  â”‚ â€¢ icon     â”‚  â”‚             â”‚  â”‚          â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ googleId â”‚  â”‚ â€¢ badges   â”‚  â”‚             â”‚  â”‚          â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ vehicle  â”‚  â”‚            â”‚  â”‚             â”‚  â”‚          â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   Info     â”‚  â”‚            â”‚  â”‚             â”‚  â”‚          â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                                  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚                       MONGOOSE MODELS                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ User.js        â€¢ Purpose.js                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Favorite.js    â€¢ PasswordReset.js                            â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SERVIÃ‡OS EXTERNOS                                    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Google Maps    â”‚  â”‚  Google OAuth    â”‚  â”‚  Expo Push Service       â”‚  â”‚
â”‚  â”‚  â€¢ Geocoding    â”‚  â”‚  â€¢ Sign In       â”‚  â”‚  â€¢ Push Notifications    â”‚  â”‚
â”‚  â”‚  â€¢ Directions   â”‚  â”‚  â€¢ User Info     â”‚  â”‚                          â”‚  â”‚
â”‚  â”‚  â€¢ Places       â”‚  â”‚                  â”‚  â”‚                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  SMTP Server (Nodemailer)                                           â”‚   â”‚
â”‚  â”‚  â€¢ Gmail / Outros provedores                                        â”‚   â”‚
â”‚  â”‚  â€¢ Reset de senha                                                   â”‚   â”‚
â”‚  â”‚  â€¢ NotificaÃ§Ãµes por email                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Fluxo de Dados

### 1. AutenticaÃ§Ã£o com Email/Senha

```
Mobile App
    â”‚
    â”œâ”€â†’ POST /api/auth/register { name, email, password, ... }
    â”‚       â”‚
    â”‚       â”œâ”€â†’ AuthController.register()
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â†’ Validar dados
    â”‚       â”‚       â”œâ”€â†’ Hash senha (bcrypt)
    â”‚       â”‚       â”œâ”€â†’ User.create()
    â”‚       â”‚       â”‚       â”‚
    â”‚       â”‚       â”‚       â””â”€â†’ MongoDB: INSERT into users
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â†’ Gerar JWT token
    â”‚       â”‚       â””â”€â†’ Retornar { user, token }
    â”‚       â”‚
    â”‚       â””â”€â†’ Mobile: Salvar token + navegar
    â”‚
    â””â”€â†’ POST /api/auth/login { email, password }
            â”‚
            â”œâ”€â†’ AuthController.login()
            â”‚       â”‚
            â”‚       â”œâ”€â†’ User.findOne({ email }).select('+password')
            â”‚       â”‚       â”‚
            â”‚       â”‚       â””â”€â†’ MongoDB: FIND user
            â”‚       â”‚
            â”‚       â”œâ”€â†’ bcrypt.compare(password, user.password)
            â”‚       â”œâ”€â†’ Gerar JWT token
            â”‚       â””â”€â†’ Retornar { user, token }
            â”‚
            â””â”€â†’ Mobile: Salvar token + navegar
```

### 2. AutenticaÃ§Ã£o com Google

```
Mobile App
    â”‚
    â”œâ”€â†’ Google Sign In SDK
    â”‚       â”‚
    â”‚       â””â”€â†’ Obter idToken
    â”‚
    â””â”€â†’ POST /api/auth/google { idToken }
            â”‚
            â”œâ”€â†’ AuthController.googleAuth()
            â”‚       â”‚
            â”‚       â”œâ”€â†’ Verificar idToken no Google
            â”‚       â”‚       â”‚
            â”‚       â”‚       â””â”€â†’ Google API: Validar token
            â”‚       â”‚
            â”‚       â”œâ”€â†’ User.findOne({ googleId })
            â”‚       â”‚   OU
            â”‚       â”‚   User.create({ googleId, email, name, ... })
            â”‚       â”‚       â”‚
            â”‚       â”‚       â””â”€â†’ MongoDB: FIND or CREATE
            â”‚       â”‚
            â”‚       â”œâ”€â†’ Gerar JWT token
            â”‚       â””â”€â†’ Retornar { user, token }
            â”‚
            â””â”€â†’ Mobile: Salvar token + navegar
```

### 3. Buscar Tipos de ServiÃ§o

```
Mobile App (HomeScreen)
    â”‚
    â””â”€â†’ GET /api/purposes/motorcycle
            â”‚
            â”œâ”€â†’ PurposeController.getByVehicleType('motorcycle')
            â”‚       â”‚
            â”‚       â”œâ”€â†’ Purpose.find({ vehicleType: 'motorcycle', isActive: true })
            â”‚       â”‚       â”‚
            â”‚       â”‚       â””â”€â†’ MongoDB: FIND purposes
            â”‚       â”‚
            â”‚       â””â”€â†’ Retornar [{ id, title, subtitle, icon, badges }, ...]
            â”‚
            â””â”€â†’ Mobile: Renderizar lista de opÃ§Ãµes
```

### 4. Gerenciar Favoritos

```
Mobile App
    â”‚
    â”œâ”€â†’ GET /api/favorites
    â”‚       â”‚ (Header: Authorization: Bearer <token>)
    â”‚       â”‚
    â”‚       â”œâ”€â†’ Auth Middleware: Verificar JWT
    â”‚       â”‚       â”‚
    â”‚       â”‚       â””â”€â†’ Decodificar token â†’ req.userId
    â”‚       â”‚
    â”‚       â”œâ”€â†’ FavoriteController.list()
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â†’ Favorite.find({ userId: req.userId })
    â”‚       â”‚       â”‚       â”‚
    â”‚       â”‚       â”‚       â””â”€â†’ MongoDB: FIND favorites
    â”‚       â”‚       â”‚
    â”‚       â”‚       â””â”€â†’ Retornar [{ label, icon, address, lat, lng }, ...]
    â”‚       â”‚
    â”‚       â””â”€â†’ Mobile: Exibir favoritos
    â”‚
    â””â”€â†’ POST /api/favorites { label, icon, address, latitude, longitude }
            â”‚ (Header: Authorization: Bearer <token>)
            â”‚
            â”œâ”€â†’ Auth Middleware: Verificar JWT
            â”‚
            â”œâ”€â†’ FavoriteController.create()
            â”‚       â”‚
            â”‚       â”œâ”€â†’ Favorite.create({ userId, label, icon, ... })
            â”‚       â”‚       â”‚
            â”‚       â”‚       â””â”€â†’ MongoDB: INSERT into favorites
            â”‚       â”‚
            â”‚       â””â”€â†’ Retornar novo favorito
            â”‚
            â””â”€â†’ Mobile: Atualizar lista
```

### 5. Reset de Senha

```
Mobile App
    â”‚
    â”œâ”€â†’ [1] POST /api/auth/forgot-password { email }
    â”‚       â”‚
    â”‚       â”œâ”€â†’ AuthController.forgotPassword()
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â†’ User.findOne({ email })
    â”‚       â”‚       â”œâ”€â†’ Gerar cÃ³digo 6 dÃ­gitos
    â”‚       â”‚       â”œâ”€â†’ PasswordReset.create({ userId, code, expiresAt })
    â”‚       â”‚       â”‚       â”‚
    â”‚       â”‚       â”‚       â””â”€â†’ MongoDB: INSERT
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â†’ EmailService.sendPasswordReset(email, code)
    â”‚       â”‚       â”‚       â”‚
    â”‚       â”‚       â”‚       â””â”€â†’ SMTP: Enviar email
    â”‚       â”‚       â”‚
    â”‚       â”‚       â””â”€â†’ Retornar { message: "CÃ³digo enviado" }
    â”‚       â”‚
    â”‚       â””â”€â†’ Mobile: Navegar para tela de verificaÃ§Ã£o
    â”‚
    â”œâ”€â†’ [2] POST /api/auth/verify-code { email, code }
    â”‚       â”‚
    â”‚       â”œâ”€â†’ AuthController.verifyCode()
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â†’ User.findOne({ email })
    â”‚       â”‚       â”œâ”€â†’ PasswordReset.findOne({ userId, code, used: false })
    â”‚       â”‚       â”œâ”€â†’ Verificar expiraÃ§Ã£o
    â”‚       â”‚       â””â”€â†’ Retornar { valid: true }
    â”‚       â”‚
    â”‚       â””â”€â†’ Mobile: Navegar para nova senha
    â”‚
    â””â”€â†’ [3] POST /api/auth/reset-password { email, code, newPassword }
            â”‚
            â”œâ”€â†’ AuthController.resetPassword()
            â”‚       â”‚
            â”‚       â”œâ”€â†’ Validar cÃ³digo novamente
            â”‚       â”œâ”€â†’ Hash nova senha
            â”‚       â”œâ”€â†’ User.updateOne({ email }, { password: hashedPassword })
            â”‚       â”‚       â”‚
            â”‚       â”‚       â””â”€â†’ MongoDB: UPDATE user
            â”‚       â”‚
            â”‚       â”œâ”€â†’ PasswordReset.updateOne({ used: true })
            â”‚       â””â”€â†’ Retornar { message: "Senha atualizada" }
            â”‚
            â””â”€â†’ Mobile: Navegar para login
```

### 6. Push Notifications

```
Mobile App (Startup)
    â”‚
    â”œâ”€â†’ Expo.Notifications.getExpoPushTokenAsync()
    â”‚       â”‚
    â”‚       â””â”€â†’ Obter pushToken
    â”‚
    â””â”€â†’ PUT /api/auth/update-profile { expoPushToken }
            â”‚
            â”œâ”€â†’ User.updateOne({ _id }, { expoPushToken })
            â”‚       â”‚
            â”‚       â””â”€â†’ MongoDB: UPDATE user
            â”‚
            â””â”€â†’ Salvo!

Backend (Evento)
    â”‚
    â””â”€â†’ NotificationService.sendPushNotification(userId, { title, body })
            â”‚
            â”œâ”€â†’ User.findById(userId).select('expoPushToken')
            â”‚
            â”œâ”€â†’ Expo.sendPushNotificationsAsync([{
            â”‚       to: user.expoPushToken,
            â”‚       title, body
            â”‚   }])
            â”‚       â”‚
            â”‚       â””â”€â†’ Expo Push Service: Enviar notificaÃ§Ã£o
            â”‚
            â””â”€â†’ Mobile: Receber notificaÃ§Ã£o
```

## SeguranÃ§a

### AutenticaÃ§Ã£o e AutorizaÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           FLUXO DE AUTENTICAÃ‡ÃƒO JWT                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Login bem-sucedido
   â””â”€â†’ Gerar JWT token
       â€¢ Payload: { userId, userType, email }
       â€¢ Secret: process.env.JWT_SECRET
       â€¢ Expiration: 7 dias

2. Armazenar token no cliente
   â””â”€â†’ AsyncStorage (mobile)
       Cookies/LocalStorage (web)

3. RequisiÃ§Ãµes autenticadas
   â””â”€â†’ Header: Authorization: Bearer <token>

4. Middleware de autenticaÃ§Ã£o
   â””â”€â†’ jwt.verify(token, SECRET)
       â€¢ Decodificar payload
       â€¢ Verificar expiraÃ§Ã£o
       â€¢ Injetar req.userId

5. Controllers protegidos
   â””â”€â†’ Usar req.userId para operaÃ§Ãµes
```

### ProteÃ§Ã£o de Senha

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            HASH DE SENHA (bcrypt)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cadastro:
  plainPassword â†’ bcrypt.hash(password, 10) â†’ hashedPassword
                                               â†“
                                          Salvar no DB

Login:
  plainPassword â†’ bcrypt.compare(plain, hashed) â†’ true/false
                                                   â†“
                                              Gerar token
```

### ValidaÃ§Ã£o de Dados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          VALIDAÃ‡ÃƒO COM ZOD (Mobile)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Schema:
  const loginSchema = z.object({
    email: z.string().email(),
    password: z.string().min(6)
  });

Uso:
  loginSchema.parse(formData)
    â†“ Se vÃ¡lido
  POST /api/auth/login
    â†“ Se invÃ¡lido
  Exibir erros no formulÃ¡rio
```

## Performance e OtimizaÃ§Ãµes

### Backend

- âœ… Ãndices no MongoDB (email, googleId, vehicleType)
- âœ… Connection pooling (Mongoose)
- âœ… CompressÃ£o de resposta (futuro)
- âœ… Cache de queries frequentes (futuro)

### Mobile

- âœ… Lazy loading de componentes
- âœ… MemoizaÃ§Ã£o com React.memo
- âœ… OtimizaÃ§Ã£o de re-renders (Zustand)
- âœ… Image optimization (Expo)

### Web

- âœ… Server-side rendering (Next.js)
- âœ… Static generation (quando aplicÃ¡vel)
- âœ… Code splitting automÃ¡tico
- âœ… Image optimization (next/image - futuro)

---

**Ãšltima atualizaÃ§Ã£o**: 24 de dezembro de 2025
